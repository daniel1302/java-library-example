{% extends "../main.html.twig" %}

{% block body %}
    <h2>Książki</h2>
    <p>Zarządzaj</p>
    
    {% if message is defined %}
        <p class="padding-10 bg-success">
            {{- message -}}
        </p>
    {% endif %}

    {% if warning is defined %}
        <p class="padding-10 bg-warning">
            {{- warning -}}
        </p>
    {% endif %}
    
    <a href="book-manage">
        <div class="btn btn-primary">Dodaj</div>
    </a>
    <table class="table table-striped">
      <thead>
        <tr>
            <th>ID</th>
            <th>Tytuł</th>
            <th>Wydawca</th>
            <th>Autorzy</th>
            <th>ISBN</th>
            <th>Data publikacji</th>
            <th width="30%">Opcje</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}    
            
            <tr>
                <td>{{- book.id }}</td>
                <td>{{- book.title -}}</td>
                <td> PWN </td>
                <td>{{- book.authors -}}</td>
                <td>{{- book.isbn -}}</td>
                <td>{{- book.publicationYear -}}</td>
                <td>
                    <a href="book-manage?book-id={{- book.id -}}">edytuj</a> ||                   
                    <a href="?delete={{- book.id -}}" onclick="return confirm('Potwierdź usunięcie');">usuń</a>
                    {% if book.statusId > 0 %}
                        || <a href="?free={{- book.id -}}" onclick="return confirm('Potwierdź oznaczenie jako wolna'); ">uwolnij<a/>
                    {% endif %}
                </td>
            </tr>
            
        {% endfor %}
        
      </tbody>
    </table>
{% endblock %}